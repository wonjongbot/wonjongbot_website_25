<!doctype html><html lang=en-us><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><title>wonjongbot/projects/tagebuilder/</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="all,follow"><meta name=googlebot content="index,follow,snippet,archive"><link rel=stylesheet href=https://wonjongbot.com/hugo-theme-console/css/terminal-0.7.4.min.css><link rel=stylesheet href=https://wonjongbot.com/hugo-theme-console/css/animate-4.1.1.min.css><link rel=stylesheet href=https://wonjongbot.com/hugo-theme-console/css/console.css><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script><script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><meta property="og:title" content="tageBuilder"><meta property="og:description" content><meta property="og:type" content="article"><meta property="og:url" content="https://wonjongbot.com/projects/tagebuilder/"><meta property="og:image" content="https://wonjongbot.com/projects/tagebuilder/tagebuilder_thumb_hu_d6d948256786c33c.png"><meta property="article:published_time" content="2025-01-04T00:00:00+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://wonjongbot.com/projects/tagebuilder/tagebuilder_thumb_hu_d6d948256786c33c.png"><meta name=twitter:title content="tageBuilder"><meta name=twitter:description content="Python-based sim/eval tool for TAGE-like branch predictors."><script type=importmap>
      {
        "imports": {
          "three": "https://unpkg.com/three@0.152.2/build/three.module.js",
          "three/examples/jsm/geometries/TeapotGeometry.js": "https://unpkg.com/three@0.152.2/examples/jsm/geometries/TeapotGeometry.js",
          "three/examples/jsm/controls/OrbitControls.js": "https://unpkg.com/three@0.152.2/examples/jsm/controls/OrbitControls.js",
          "teapot": "/threedee/teapot.js"
        }
      }
    </script></head><body class=terminal><div class=container><div class=terminal-nav><header class=terminal-logo><div class="logo terminal-prompt" style=display:flex;align-items:center><a style=margin-right:4px><div id=teapot-container></div></a><a href=https://wonjongbot.com/ class="no-style site-name">wonjongbot</a>:~#
<a href=https://wonjongbot.com/projects>projects</a>/<a href=https://wonjongbot.com/projects/tagebuilder>tagebuilder</a>/</div></header><nav class=terminal-menu><ul vocab="https://schema.org/" typeof="BreadcrumbList"><li><a href=https://wonjongbot.com/ typeof="ListItem">home/</a></li><li><a href=https://wonjongbot.com/posts/ typeof="ListItem">posts/</a></li><li><a href=https://wonjongbot.com/projects/ typeof="ListItem">projects/</a></li><li><a href=https://wonjongbot.com/cv/ typeof="ListItem">cv/</a></li></ul></nav></div></div><div id=teapot-preview></div><div class="container animated zoomIn fast"><h1>tageBuilder</h1><div class=content_body><p><em>Python-based sim/eval tool for TAGE-like branch predictors.</em></p><div><img src=tagebuilder_banner.png width=100%></img></div><h2 id=overview>Overview</h2><p>tageBuilder is a Python-based simulator and performance evaluation tool for TAGE-like branch predictors. It offers configurable parameters for modeling TAGE predictors and is optimized for performance with Numba and NumPy. Predictor performance can be evaluated with 200+ branch trace datasets from the 2016 Championship Branch Prediction (CBP2016) environment and generates detailed performance metrics.</p><p><em>TAGE predictors are state-of-the-art branch predictor design. If you are curious about their details, check out <a href=#resources>resources</a>.</em></p><h2 id=features>Features</h2><ul><li><p><strong>Customizable Predictor Model:</strong><br>Configure aspects such as tagged components (number, history length, tag width) and base predictor settings (prediction bits, hysteresis bits) via a YAML spec file.</p><p><em>The tool does not model non-tagged components (except for the base predictor) such as the loop predictor and the statistical corrector.</em></p><p>A predictor with 12 tagged components with total space of 212Kb scored accuracy of 95%> and MPKI of 1~3 for most traces.</p></li><li><p><strong>Optimized Simulation:</strong><br>Uses Numba JIT and NumPy vectorized operations to process ~700,000 branch sequences per second per simulation process.</p></li><li><p><strong>Batch Processing:</strong><br>Supports batch prediction and updates for efficient data flow.</p></li><li><p><strong>Real-World Trace Integration:</strong><br>Works with BT9-formatted branch trace files from CBP2016, reverse-engineered to meet the toolâ€™s requirements.</p></li><li><p><strong>Comprehensive Evaluations:</strong><br>Generates metrics and visualizations including MPKI, accuracy graphs, memory usage charts, misprediction statistics, branch class analysis, and CSV outputs for further analysis.</p></li><li><p><strong>Parallel Processing:</strong><br>Runs multiple traces in parallel processes to speed up evaluations.</p></li></ul><h2 id=technical-details>Technical Details</h2><p><em>currently adding more details</em></p><h3 id=configuration>Configuration</h3><p>TAGEbuilder uses a YAML configuration file to define predictor parameters. This allows users to easily adjust the following:</p><ul><li>Number and configuration of tagged components</li><li>Base predictor settings (e.g., prediction bits, hysteresis bits)</li><li>Global predictor parameters (e.g., path history length, usefulness bit duration)</li></ul><p>Below is an example predictor spec with one base bimodal predictor and 4 tagged predictors.</p><div class=highlight><pre tabindex=0 style=background-color:#f0f3f3;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>global_config:
</span></span><span style=display:flex><span>    phist_len: <span style=color:#f60>16</span>
</span></span><span style=display:flex><span>    u_duration_log: <span style=color:#f60>19</span>
</span></span><span style=display:flex><span>tables:
</span></span><span style=display:flex><span>    <span style=color:#555>-</span> name: base
</span></span><span style=display:flex><span>      isBase: true
</span></span><span style=display:flex><span>      hist_len: <span style=color:#f60>0</span>
</span></span><span style=display:flex><span>      num_pred_entries_log: <span style=color:#f60>14</span>
</span></span><span style=display:flex><span>      num_hyst_entries_log: <span style=color:#f60>12</span>
</span></span><span style=display:flex><span>      tag_width: <span style=color:#f60>0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#555>-</span> name: t1
</span></span><span style=display:flex><span>      isBase: false
</span></span><span style=display:flex><span>      hist_len: <span style=color:#f60>8</span>
</span></span><span style=display:flex><span>      num_pred_entries_log: <span style=color:#f60>10</span>
</span></span><span style=display:flex><span>      num_hyst_entries_log: <span style=color:#f60>0</span>
</span></span><span style=display:flex><span>      tag_width: <span style=color:#f60>8</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#555>-</span> name: t2
</span></span><span style=display:flex><span>      isBase: false
</span></span><span style=display:flex><span>      hist_len: <span style=color:#f60>12</span>
</span></span><span style=display:flex><span>      num_pred_entries_log: <span style=color:#f60>10</span>
</span></span><span style=display:flex><span>      num_hyst_entries_log: <span style=color:#f60>0</span>
</span></span><span style=display:flex><span>      tag_width: <span style=color:#f60>9</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#555>-</span> name: t3
</span></span><span style=display:flex><span>      isBase: false
</span></span><span style=display:flex><span>      hist_len: <span style=color:#f60>18</span>
</span></span><span style=display:flex><span>      num_pred_entries_log: <span style=color:#f60>10</span>
</span></span><span style=display:flex><span>      num_hyst_entries_log: <span style=color:#f60>0</span>
</span></span><span style=display:flex><span>      tag_width: <span style=color:#f60>9</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#555>-</span> name: t4
</span></span><span style=display:flex><span>      isBase: false
</span></span><span style=display:flex><span>      hist_len: <span style=color:#f60>27</span>
</span></span><span style=display:flex><span>      num_pred_entries_log: <span style=color:#f60>10</span>
</span></span><span style=display:flex><span>      num_hyst_entries_log: <span style=color:#f60>0</span>
</span></span><span style=display:flex><span>      tag_width: <span style=color:#f60>10</span>
</span></span></code></pre></div><h3 id=data-input>Data Input</h3><p>The tool accepts branch trace files in the BT9 format, compatible with the CBP2016 traces.</p><h3 id=output>Output</h3><p><em>check <code>tageBuilder/docs/example_sim_output.tar.gz</code> for output example.</em></p><p>TAGEbuilder produces several outputs:</p><ul><li>Visualizations for memory usage by predictor components</li></ul><div><img src=https://raw.githubusercontent.com/wonjongbot/tageBuilder/refs/heads/master/docs/img/PLOT_STORAGE.png width=100%></img></div><ul><li>Graphs for MPKI and accuracy</li></ul><div><img src=https://raw.githubusercontent.com/wonjongbot/tageBuilder/refs/heads/master/docs/img/PLOT_OVERALL_MPKI_ACCURCY.png width=100%></img></div><ul><li>Statistics on mispredictions per branch PC and branch class analysis</li></ul><div><img src=https://raw.githubusercontent.com/wonjongbot/tageBuilder/refs/heads/master/docs/img/PLOT_PER_CLASS_STAT.png width=100%></img></div><div><img src=https://raw.githubusercontent.com/wonjongbot/tageBuilder/refs/heads/master/docs/img/PLOT_TOP_N_ADDR.png width=100%></img></div><div><img src=https://raw.githubusercontent.com/wonjongbot/tageBuilder/refs/heads/master/docs/img/PLOT_TOP_N_SUM.png width=100%></img></div><ul><li>CSV files summarizing simulation results (per predictor, per branch PC address, general MPKI/accuracy)</li></ul><h2 id=performance--benchmarks>Performance & Benchmarks</h2><p><em>currently adding more details</em></p><h2 id=things-learned>Things Learned</h2><p><em>currently adding more details</em></p><h2 id=applications>Applications</h2><p>Primary application is to aid high performance CPU design with fast branch predictor prototyping.</p><h2 id=resources>Resources</h2><ul><li><p><a href=https://jilp.org/vol8/v8paper1.pdf>A case for (partially) TAgged GEometric history length branch prediction</a></p></li><li><p><a href=https://comparch.net/2013/06/30/why-tage-is-the-best/>Why TAGE is the best</a></p></li><li><p><a href=https://www.irisa.fr/caps/projects/Architecture/L-TAGE.h>L-TAGE submission code to the 2nd CBP</a></p></li><li><p><a href=https://github.com/craymichael/CBP-16-Simulation>craymichael/CBP-16-Simulation</a></p></li><li><p><a href=https://ece752.ece.wisc.edu/lect09-adv-branch-prediction.ppt>UofWisco Advanced Branch Prediction Lecture</a></p></li></ul></div><div class=footer>Powered by <a href=https://gohugo.io/>Hugo</a> with
<a href=https://github.com/mrmierzejewski/hugo-theme-console/>Console Theme</a>.</div></div></body><script type=module>
    import { spawnTeapot } from "teapot";

    
    const container = document.getElementById("teapot-container");
    spawnTeapot(container, {
      containerSize: 50,
      teapotSize: 0.8,
      tessellation: 10,
      baseSpeed: 0.01,
      hoverSpeed: 0.03,
      cameraZ: 3,
    });

    const previewContainer = document.getElementById("teapot-preview");
    let previewSceneInstance = null;

    previewSceneInstance = spawnTeapot(previewContainer, {
          containerSize: 250,
          teapotSize: 0.8,
          tessellation: 10,
          baseSpeed: 0.01,
          hoverSpeed: 0.03,
          cameraZ: 3,
          containerRoot: container
    });

      
      document.addEventListener("DOMContentLoaded", () => {
        const teapot = document.getElementById("teapot-container")
        const tp_preview_mover = document.getElementById("teapot-preview-mover")

        teapot.addEventListener("mouseenter", () => {
          
          previewContainer.style.display = "block";
        });

        teapot.addEventListener("mousemove", e => {
          
          previewContainer.style.top = (e.pageY + 10) + "px";
          previewContainer.style.left = (e.pageX + 10) + "px";
        });

        teapot.addEventListener("mouseleave", () => {
          previewContainer.style.display = "none";
        });
      });
  </script></html>